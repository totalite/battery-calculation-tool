<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TotaLite Battery Calculator</title>
<style>
body{font-family:Arial;background:#f0f0f0;padding:20px;margin:0}
.container{max-width:800px;margin:0 auto;background:white;padding:30px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
h1{color:#333;margin-top:0}
.input-group{margin:20px 0}
label{display:block;margin-bottom:5px;font-weight:bold;color:#555}
input,select{width:100%;padding:8px;font-size:14px;box-sizing:border-box;border:1px solid #ddd;border-radius:4px}
input[type="range"]{cursor:pointer}
.result{background:#e3f2fd;padding:20px;margin-top:30px;border-radius:5px;border-left:4px solid #2196F3}
.result h2{color:#1976d2;margin-top:0}
.result-item{margin:10px 0;font-size:16px;color:#333}
.result-item strong{color:#1976d2}
.fixed-config{background:#f5f5f5;padding:15px;border-radius:5px;border:1px solid #ddd;margin:20px 0}
.fixed-config h3{margin:0 0 10px 0;color:#555;font-size:14px}
.fixed-config ul{margin:5px 0;padding-left:20px}
.fixed-config li{color:#666;font-size:14px}
.note{background:#fff3cd;padding:15px;border-radius:5px;border-left:4px solid #ffc107;margin:20px 0;font-size:14px;color:#856404}
</style>
</head>
<body>
<div class="container">
<h1>ðŸ”‹ TotaLite Battery Calculator</h1>
<p style="color:#666;margin-bottom:30px">Calculate battery requirements for your TotaLite deployment. Includes 30% safety margin for battery degradation and accounts for standby LTE power.</p>
<div class="input-group">
<label>LED Power: <span id="ledval">50</span>%</label>
<input type="range" id="led" min="5" max="100" step="5" value="50" oninput="calc()">
<small style="color:#888">Target distance: <span id="dist">35-60m targets</span></small>
</div>
<div class="input-group">
<label>Measurement Interval:</label>
<select id="interval" onchange="calc()">
<option value="300">5 minutes</option>
<option value="900" selected>15 minutes</option>
<option value="1800">30 minutes</option>
<option value="3600">1 hour</option>
<option value="7200">2 hours</option>
<option value="14400">4 hours</option>
<option value="21600">6 hours</option>
<option value="43200">12 hours</option>
<option value="86400">24 hours</option>
</select>
</div>
<div class="input-group">
<label>Deployment Duration (days):</label>
<input type="number" id="days" value="30" min="1" max="365" oninput="calc()">
</div>
<div class="input-group">
<label>Temperature Conditions:</label>
<select id="temp" onchange="calc()">
<option value="0" selected>Normal (10Â°C to 40Â°C)</option>
<option value="0.071">Cold (less than 10Â°C, tilt sensor heating)</option>
</select>
</div>
<div class="input-group">
<label>LTE Coverage:</label>
<select id="lte" onchange="calc()">
<option value="1" selected>Good (normal conditions)</option>
<option value="1.15">Poor (increased transmission power)</option>
</select>
</div>
<div class="fixed-config">
<h3>Fixed Configuration:</h3>
<ul>
<li>Integration Cycles: <strong>3 cycles</strong></li>
<li>Input Voltage: <strong>12V DC</strong></li>
<li>Measurement Duration: <strong>400 seconds (~6m 40s)</strong></li>
<li>Standby Power (LTE): <strong>0.066W</strong></li>
</ul>
</div>
<div class="result">
<h2>ðŸ“Š Battery Requirements</h2>
<div class="result-item">Required Capacity: <strong id="ah">0</strong> Ah at <strong>12V</strong></div>
<div class="result-item">Total Energy: <strong id="wh">0</strong> Wh (with 30% safety margin)</div>
<div class="result-item">Recommended Battery: <strong id="rec">0</strong> Ah or higher</div>
</div>
<div class="note">
<strong>Note:</strong> These calculations are based on controlled test data from Fugro's Tech Center (September 2025). 
Formulas calibrated from actual measurements: Average power consumption during measurement is 1.259W at 100% LED and 0.729W at 10% LED. 
Standby power (0.066W) accounts for LTE connectivity between measurements.
</div>
</div>
<script>
function calc(){
// Input values
var l=Number(document.getElementById('led').value);
var i=Number(document.getElementById('interval').value);
var d=Number(document.getElementById('days').value);
var t=Number(document.getElementById('temp').value);
var lt=Number(document.getElementById('lte').value);

// Constants
var v=12; // Voltage
var STANDBY_LTE=0.066; // Standby power with LTE (W)
var MEASUREMENT_DURATION=400; // Measurement duration (seconds)

// Updated formulas based on actual measurements
// Power = (0.00589 Ã— LED%) + 0.66961
var SLOPE=0.00589;
var INTERCEPT=0.66961;

// Update LED display
document.getElementById('ledval').innerHTML=l;

// Update distance guide
var distGuide='';
if(l<=10)distGuide='â‰¤10m targets';
else if(l<=25)distGuide='10-35m targets';
else if(l<=50)distGuide='35-60m targets';
else distGuide='60-100m targets';
document.getElementById('dist').innerHTML=distGuide;

// Calculate base power
var basePower=SLOPE*l+INTERCEPT;

// Add temperature adjustment (cold conditions)
basePower=basePower+t;

// Apply LTE condition multiplier
basePower=basePower*lt;

// Calculate standby time
var standbyTime=i-MEASUREMENT_DURATION;
if(standbyTime<0)standbyTime=0;

// Calculate average power (duty cycle)
var activePowerContrib=(basePower*MEASUREMENT_DURATION)/i;
var standbyPowerContrib=(STANDBY_LTE*standbyTime)/i;
var avgPower=activePowerContrib+standbyPowerContrib;

// Calculate battery requirements
var totalEnergyWh=avgPower*d*24;
var requiredEnergyWh=totalEnergyWh*1.3; // 30% safety margin
var requiredCapacityAh=requiredEnergyWh/v;
var recommendedAh=Math.ceil(requiredCapacityAh/10)*10;

// Update display
document.getElementById('ah').innerHTML=requiredCapacityAh.toFixed(1);
document.getElementById('wh').innerHTML=requiredEnergyWh.toFixed(0);
document.getElementById('rec').innerHTML=recommendedAh;
}

// Calculate on page load
window.onload=function(){calc()};
</script>
</body>
</html>